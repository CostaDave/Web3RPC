/*! web3rpc 18-05-2015 */
(function(){var a,b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;a=function(a,c){var d;return d=function(){function d(a,b){var c;this.host=a,this.port=b,null==this.port&&(c=this.host.split(":"),this.host=c[0],this.port=c[1]),this.nonce=0}return d.RequestError=function(a){function c(a,b){this.message=a,this.xhr=b,this.name="Web3RPC.RequestError"}return b(c,a),c}(Error),d.prototype.send=function(a,b,e){var f,g;if("function"==typeof b&&(e=b,b=[]),null==e)throw"send() function must be passed a callback!";return f={jsonrpc:"2.0",method:a,params:b,id:this.nonce},g=new c,g.onreadystatechange=function(){var a;if(4===this.readyState){if(200!==this.status)return void e(new d.RequestError("Unexpected response code: "+g.status,this));try{a=JSON.parse(this.responseText)}catch(b){return void e(new d.RequestError("Couldn't parse response",this))}return null!=a.error?void e(new d.RequestError(a.error.message,this)):e(null,a.result)}},g.open("POST","http://"+this.host+":"+this.port+"/",!0),g.send(JSON.stringify(f)),this.nonce+=1},d.prototype.call_or_transact=function(b,c,d,e,f,g,h){var i;return null==b&&(b="eth_call"),i=c.slice(0,c.indexOf("(")),this.send("web3_sha3",[a.fromAscii(c)],function(c){return function(j,k){var l,m;return null!=j?void h(j,k):(l=k.slice(0,10),m=a.abi.inputParser(d)[i].apply(null,e),f.data=l+m,c.send(b,[f,g],function(c,e){return null!=c?h(c,e):"eth_call"===b?h(null,a.abi.outputParser(d)[i].call(null,e)[0]):h(null,e)}))}}(this))},d.prototype.fullyQualifyNames=function(a){var b,c,d,e,f,g,h,i,j;for(i={},d=0,g=a.length;g>d;d++)if(b=a[d],b.name.indexOf("(")>0)i[b.name.substring(0,b.name.indexOf("("))]=b.name;else{for(c=b.name+"(",j=b.inputs,f=0,h=j.length;h>f;f++)e=j[f],c+=e.type+",";b.inputs.length>0&&(c=c.slice(0,c.length-1)),c+=")",i[b.name]=c}return i},d.prototype.contract=function(a){var b,c,d,e,f,g;g=this,b=function(){function a(a){this.address=a}return a.prototype.web3rpc=g,a}(),c=function(a){return function(b,c){return g=a,function(){var a,d,e,f,h;return e=function(a){return function(d,e,f,h,i){var j,k,l;j={to:a.address};for(k in f)l=f[k],j[k]=l;return g.call_or_transact(d,b,c,e,j,h,i)}}(this),a=Array.prototype.slice.call(arguments),"function"==typeof a[a.length-1]&&(d=a[a.length-1]),null!=d?(h=a.splice(0,a.length-1),e("eth_call",h,{},"latest",d)):(h=a,f=function(a){return function(b){return function(b,c,d){var f;if(null==b&&(b={}),null==c&&(c="latest"),"string"==typeof b&&(d=c,c=b,b={}),"function"==typeof b&&(d=b,b={}),"function"==typeof c&&(d=c,c="latest"),null==d||"function"!=typeof d)throw f=a.indexOf("send")>=0?"send":"call",f+"() function must be passed a callback!";return e(a,h,b,c,d)}}(this)},{call:f("eth_call"),send:f("eth_sendTransaction")})}}}(this),e=this.fullyQualifyNames(a);for(f in e)d=e[f],b.prototype[f]=c(d,a);return b},d}()},"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports=a(require("web3"),require("xmlhttprequest").XMLHttpRequest):window.Web3RPC=a(web3,XMLHttpRequest)}).call(this);